<?php include("bot-trap/blacklist.php");?><!DOCTYPE html Cache-Control: public, max-age=2400000, must-revalidate><html lang="en"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, user-scalable=no" /><meta name="description" content="Northern Development: Your resource for everyday remodeling, maintenance, and repair."/><title>Welcome: Northern Development</title><?php include("headdefaults.php");?><script type="text/javascript" src="shrek.js" defer></script> <style type="text/css">div#container{overflow:hidden}header{overflow:hidden}footer{padding:25px 0}footer h6{color:white}footer a:link{color:LightBlue}footer a:visited{color:MediumPurple}@media handheld,screen and (max-device-width:900px),(max-width:320px),(-webkit-device-pixel-ratio:1.5){footer{padding:5% 0;margin-top:0}footer h6{font-size:.6em}}</style></head><body><?php include("noscript.html");?><div id="container"><?php require("Header.html");?><?php require("Navigation.html");$slideshowPath="images/homepage slideshow/";$mobilePath=$slideshowPath."mobile/";$slideshowImages=new SplDoublyLinkedList();$slideshowImagesOrder;$directoryExisted=true;if(!file_exists($mobilePath)){mkdir($mobilePath,0755,true);$directoryExisted=false;}$fileReader=fopen($slideshowPath."order","r");if($fileReader){$slideshowImagesOrder=new SplDoublyLinkedList();while(($line=fgets($fileReader))!==false){$slideshowImagesOrder->push(substr($line,0,-1));}fclose($fileReader);foreach(glob($slideshowPath."*.{jpg,jpeg,png,gif,JPG,JPEG,PNG,GIF}",GLOB_BRACE)as $filePath){$fileName=basename($filePath);$fileMobilePath=$mobilePath.$fileName;if(!($directoryExisted)||!(file_exists($fileMobilePath))){list($originalWidth,$originalHeight)=getimagesize($filePath);echo "\t\t\t<!--originalWidth: ".$originalWidth.",\toriginalHeight: ".$originalHeight."-->\n";$originalImage;$extension=substr($filePath,-4);if($extension==".jpg"||$extension==".JPG"||$extension=="jpeg"||$extension=="JPEG")$originalImage=imagecreatefromjpeg($filePath);else if($extension==".png"||$extension==".PNG")$originalImage=imagecreatefrompng($filePath);else if($extension==".gif"||$extension==".GIF")$originalImage=imagecreatefromgif($filePath);else $originalImage=false;$croppedImage;if($originalWidth>$originalHeight){$offset=($originalWidth - $originalHeight)/ 2;$croppedImage=imagecrop($originalImage,['x'=>$offset,'y'=>0,'width'=>($originalWidth - $offset),'height'=>$originalHeight]);$originalWidth=$originalHeight;}else{$offset=($originalHeight - $originalWidth)/ 2;$croppedImage=imagecrop($originalImage,['x'=>0,'y'=>$offset,'width'=>$originalWidth,'height'=>$originalWidth]);$originalHeight=$originalWidth;}imagedestroy($originalImage);$newHeight=200;$newWidth=$newHeight;$newImage=imagecreatetruecolor($newWidth,$newHeight);imagecopyresampled($newImage,$croppedImage,0,0,0,0,$newWidth,$newHeight,$originalWidth,$originalHeight);imagedestroy($croppedImage);imagejpeg($newImage,$fileMobilePath,90);imagedestroy($newImage);}$slideshowImagesOrder->rewind();$slideshowImagesOrderPosition=0;$slideshowImagesOrderSize=$slideshowImagesOrder->count();while($slideshowImagesOrderPosition<$slideshowImagesOrderSize&&$slideshowImagesOrder->current()!=$fileName){$slideshowImagesOrderPosition++;$slideshowImagesOrder->next();}$slideshowImagesPosition=0;$slideshowImagesSize=$slideshowImages->count();if($slideshowImagesSize){$orderFlag=true;while($slideshowImagesOrderPosition<$slideshowImagesOrderSize&&$orderFlag){$slideshowImagesOrderPosition++;$slideshowImagesOrder->next();$slideshowImagesPosition=0;$slideshowImages->rewind();while($slideshowImagesPosition<$slideshowImagesSize&&$orderFlag){if($slideshowImages->current()==$slideshowImagesOrder->current()){$orderFlag=false;}else{$slideshowImagesPosition+=2;$slideshowImages->next();$slideshowImages->next();}}}}$exifData=exif_read_data($filePath,"COMMENT",true);if($slideshowImagesOrderPosition<$slideshowImagesOrderSize){$slideshowImages->add($slideshowImagesPosition,$fileName);if($exifData)$slideshowImages->add($slideshowImagesPosition + 1,$exifData["COMMENT"][0]);else $slideshowImages->add($slideshowImagesPosition + 1,$exifData);}else{$slideshowImages->push($fileName);if($exifData)$slideshowImages->push($exifData["COMMENT"][0]);else $slideshowImages->push($exifData);}}echo "\t\t\t<div id=\"slideshow\">\n";$slideshowImages->rewind();$slideshowImagesPosition=0;$slideshowImagesSize=$slideshowImages->count();while($slideshowImagesPosition<$slideshowImagesSize){echo "\t\t\t\t<img src=\"".$slideshowPath.$slideshowImages->current()."\"";$slideshowImages->next();if($slideshowImages->current())echo " alt=\"".$slideshowImages->current()."\"";echo "/>\n";$slideshowImages->next();$slideshowImagesPosition+=2;}echo "\t\t\t</div><!--slideshow-->\n";}else{$slideshowImagesOrder=false;echo "Error opening file: ".$slideshowPath."order \t ".$fileReader."\n";}?> <?php require("Footer.html");?></div></body></html>