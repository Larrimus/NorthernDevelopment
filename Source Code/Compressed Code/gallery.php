<?php include("bot-trap/blacklist.php");?><!DOCTYPE html Cache-Control: public, max-age=2400000, must-revalidate><html lang="en"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, user-scalable=no" /><meta name="description" content="Northern Development: Your resource for everyday remodeling, maintenance, and repair."/><title>Gallery: Northern Development</title><?php include("headdefaults.php");?></head><body><?php include("noscript.html");?><div id="container"><?php require("Header.html");?><?php require("Navigation.html");$galleryPath="images/gallery/";$thumbnailPath=$galleryPath."thumbnails/";$galleryImages=new SplDoublyLinkedList();$galleryImagesOrder;$directoryExisted=true;if(!file_exists($thumbnailPath)){mkdir($thumbnailPath,0755,true);$directoryExisted=false;}$fileReader=fopen($galleryPath."order","r");if($fileReader){$galleryImagesOrder=new SplDoublyLinkedList();while(($line=fgets($fileReader))!==false){$galleryImagesOrder->push(substr($line,0,-1));}fclose($fileReader);foreach(glob($galleryPath."*.{jpg,jpeg,png,gif,JPG,JPEG,PNG,GIF}",GLOB_BRACE)as $filePath){$fileName=basename($filePath);$fileThumbnailPath=$thumbnailPath.$fileName;if(!($directoryExisted)||!(file_exists($fileThumbnailPath))){list($originalWidth,$originalHeight)=getimagesize($filePath);echo "\t\t\t<!--originalWidth: ".$originalWidth.",\toriginalHeight: ".$originalHeight."-->\n";$originalImage;$extension=substr($filePath,-4);if($extension==".jpg"||$extension==".JPG"||$extension=="jpeg"||$extension=="JPEG")$originalImage=imagecreatefromjpeg($filePath);else if($extension==".png"||$extension==".PNG")$originalImage=imagecreatefrompng($filePath);else if($extension==".gif"||$extension==".GIF")$originalImage=imagecreatefromgif($filePath);else $originalImage=false;$croppedImage;if($originalWidth>$originalHeight){$offset=($originalWidth - $originalHeight)/ 2;$croppedImage=imagecrop($originalImage,['x'=>$offset,'y'=>0,'width'=>($originalWidth - $offset),'height'=>$originalHeight]);$originalWidth=$originalHeight;}else{$offset=($originalHeight - $originalWidth)/ 2;$croppedImage=imagecrop($originalImage,['x'=>0,'y'=>$offset,'width'=>$originalWidth,'height'=>$originalWidth]);$originalHeight=$originalWidth;}imagedestroy($originalImage);$newHeight=200;$newWidth=$newHeight;$newImage=imagecreatetruecolor($newWidth,$newHeight);imagecopyresampled($newImage,$croppedImage,0,0,0,0,$newWidth,$newHeight,$originalWidth,$originalHeight);imagedestroy($croppedImage);imagejpeg($newImage,$fileThumbnailPath,90);imagedestroy($newImage);}$galleryImagesOrder->rewind();$galleryImagesOrderPosition=0;$galleryImagesOrderSize=$galleryImagesOrder->count();while($galleryImagesOrderPosition<$galleryImagesOrderSize&&$galleryImagesOrder->current()!=$fileName){$galleryImagesOrderPosition++;$galleryImagesOrder->next();}$galleryImagesPosition=0;$galleryImagesSize=$galleryImages->count();if($galleryImagesSize){$orderFlag=true;while($galleryImagesOrderPosition<$galleryImagesOrderSize&&$orderFlag){$galleryImagesOrderPosition++;$galleryImagesOrder->next();$galleryImagesPosition=0;$galleryImages->rewind();while($galleryImagesPosition<$galleryImagesSize&&$orderFlag){if($galleryImages->current()==$galleryImagesOrder->current()){$orderFlag=false;}else{$galleryImagesPosition+=2;$galleryImages->next();$galleryImages->next();}}}}$exifData=exif_read_data($filePath,"COMMENT",true);if($galleryImagesOrderPosition<$galleryImagesOrderSize){$galleryImages->add($galleryImagesPosition,$fileName);if($exifData)$galleryImages->add($galleryImagesPosition + 1,$exifData["COMMENT"][0]);else $galleryImages->add($galleryImagesPosition + 1,$exifData);}else{$galleryImages->push($fileName);if($exifData)$galleryImages->push($exifData["COMMENT"][0]);else $galleryImages->push($exifData);}}}else{$galleryImagesOrder=false;echo "Error opening file: ".$galleryPath."order \t ".$fileReader."\n";}echo "\t\t\t<div id=\"thumbnails\">\n";$galleryImages->rewind();$galleryImagesPosition=0;$galleryImagesSize=$galleryImages->count();while($galleryImagesPosition<$galleryImagesSize){echo "\t\t\t\t<img src=\"".$thumbnailPath.$galleryImages->current()."\"";$galleryImages->next();if($galleryImages->current()){echo " alt=\"".$galleryImages->current()."\"";}echo "/>\n";$galleryImages->next();$galleryImagesPosition+=2;}echo "\t\t\t</div><!--thumbnails-->\n";echo "\t\t\t<script type=\"text/javascript\" src=\"attackhelicopter.js\" async></script>\n";echo "\t\t\t<div id=\"gallery\">\n";$galleryImages->rewind();$galleryImagesPosition=0;$galleryImagesSize=$galleryImages->count();while($galleryImagesPosition<$galleryImagesSize){echo "\t\t\t\t<div><div><img src=\"".$galleryPath.$galleryImages->current()."\"";$galleryImages->next();if($galleryImages->current())echo " alt=\"".$galleryImages->current()."\"";echo "/></div></div>\n";$galleryImages->next();$galleryImagesPosition+=2;}echo "\t\t\t</div><!--gallery-->\n";require("Footer.html");?></div></body></html>